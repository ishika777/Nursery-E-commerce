<% layout("layouts/boilerplate") %>
<div class="container mt-3">
    <h2>Final Order Details</h2>
    <% if (orderItems.length > 0) { %>
        <div class="row">
            <% orderItems.forEach(item => { %>
                <div class="col-md-4">
                    <div class="card mb-4">
                        <img src="<%= item.productid.image.url %>" class="card-img-top" alt="<%= item.productid.name %>">
                        <div class="card-body">
                            <h5 class="card-title"><%= item.productid.name %></h5>
                            <p class="card-text">Price: $<%= item.price.toFixed(2) %></p>
                            <p class="card-text">Quantity: <%= item.quantity %></p>
                        </div>
                    </div>
                </div>
            <% }); %>
        </div>
        <div class="total-amount mt-3">
            <h4>Total Amount: $<%= totalAmount.toFixed(2) %></h4>
        </div>
        <form action="/order/payment" method="POST">
            <input type="hidden" name="totalAmount" value="<%= totalAmount.toFixed(2) %>">
            <button type="submit" class="btn edit-btn mt-3">Proceed to Payment</button>
        </form>
    <% } else { %>
        <p>Your order is empty.</p>
    <% } %>
</div>
